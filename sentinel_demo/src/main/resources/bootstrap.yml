server:
  port: 8091
#  tomcat:
    # 这里调小tomcat最大线程池数量,来做测试
#    max-threads: 10
spring:
  application:
    name: sentinel_demo
# nacos
  main:
    allow-bean-definition-overriding: true  #springBoot 2.1 需要设定,防止重复
  cloud:
      nacos:
        # 服务发现
        discovery:
          server-addr: 127.0.0.1:8848
          namespace:
          cluster-name: CHRSENTINEL
        # 配置管理
        config:
          server-addr: 127.0.0.1:8848
          namespace:
          group: CHRSENTINEL
# sentinel: 注意sentinel为懒加载模式
      sentinel:
        transport:
          port: 9999  # 跟控制台交流的端口,随意指定一个未使用的端口即可
          dashboard: localhost:8080  # 指定sentinel控制台运行jar的地址
# 是否收敛链路流控规则,进行手动关闭收敛,默认为收敛true
#        web-context-unify: false
# sentinel 1.7 之后 的配置,可以直接配合关闭 ,既 spring cloud alibaba 2.1.2开始
#spring.cloud.sentinel.web-context-unify=false#web-context-unify: false
#        filter:
#          enabled: false

# ribbon 负载均衡修改
service-goods:  #服务提供者的名称!!注意是服务提供者
  ribbon:
    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule

# feign 整合sentinel ,开启feign对sentinel的支持(Feign 调用做限流),这样的话就可以把流控先知道feign了
feign:
  sentinel:
    enabled: true
